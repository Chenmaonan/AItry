import{e as q,q as K,f as N,s as F,aW as S,be as O,bf as I,b9 as L,ba as T,o as y,g,h as l,w as o,u as a,j as m,N as Z,O as j,k as G,Z as p,aX as W,aY as X,aZ as Y}from"./.pnpm.adeb4fcc.js";import{r as c,f as z}from"./index.32787260.js";import{P as H}from"./index.c77a1531.js";import{u as J}from"./useDictOptions.f89234d7.js";import{g as M}from"./model.1937115d.js";function ne(r){return c.get({url:"/key/list",params:r})}function Q(r){return c.get({url:"/key/detail",params:r})}function $(r){return c.post({url:"/key/update",params:r})}function ie(r){return c.get({url:"/key/delete",params:r})}const ee={class:"edit-popup"},le={class:"flex-1"},ue=m("div",{class:"form-tips"},"\u4E00\u65E6\u586B\u5199\u65E0\u6CD5\u4FEE\u6539\uFF0C\u8BF7\u8BA4\u771F\u586B\u5199",-1),oe=m("div",{class:"form-tips"},"\u4E0D\u586B\u5199\u9ED8\u8BA4\u4F7F\u7528 https://api.openai.com",-1),pe=q({__name:"edit",emits:["success"],setup(r,{expose:E,emit:k}){const f=K("add"),v=N(()=>f.value=="edit"?"\u7F16\u8F91 key":"\u6DFB\u52A0 key"),_=F(),b=F(),u=S({id:0,key:"",model:"",proxyUrl:"",isPlus:0,isDisable:0}),{optionsData:V,refresh:D}=J({models:{api:M}}),C={key:[{required:!0,message:"\u8BF7\u8F93\u5165key",trigger:"blur"}],model:[{required:!0,message:"\u8BF7\u9009\u62E9\u6A21\u578B",trigger:"blur"}],isPlus:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B",trigger:"blur"}],isDisable:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001",trigger:"blur"}]},x=async s=>{const e=await Q({id:s.id});for(const d in u)e[d]!=null&&e[d]!=null&&(u[d]=e[d])},w=async()=>{var s,e;await((s=_.value)==null?void 0:s.validate()),await $(u),(e=b.value)==null||e.close(),k("success"),z.msgSuccess("\u64CD\u4F5C\u6210\u529F")},U=(s="add")=>{var e;f.value=s,(e=b.value)==null||e.open(),D()},A=()=>{var s;(s=_.value)==null||s.resetFields()};return E({open:U,setFormData:x}),(s,e)=>{const d=W,n=X,h=O,P=I,i=L,B=T,R=Y;return y(),g("div",ee,[l(H,{ref_key:"popupRef",ref:b,title:a(v),async:!0,width:"550px",onClose:A,onConfirm:w},{default:o(()=>[l(R,{ref_key:"formRef",ref:_,model:a(u),rules:C,"label-width":"100px"},{default:o(()=>[l(n,{label:"\u5BC6\u94A5\u5185\u5BB9",prop:"key"},{default:o(()=>[m("div",le,[m("div",null,[l(d,{modelValue:a(u).key,"onUpdate:modelValue":e[0]||(e[0]=t=>a(u).key=t),disabled:a(f)=="edit",rows:4,clearable:"",placeholder:"",type:"textarea"},null,8,["modelValue","disabled"])]),ue])]),_:1}),l(n,{label:"\u9009\u62E9\u6A21\u578B",prop:"model"},{default:o(()=>[l(P,{modelValue:a(u).model,"onUpdate:modelValue":e[1]||(e[1]=t=>a(u).model=t),class:"min-w-[100%]",clearable:"",placeholder:"","value-key":"id"},{default:o(()=>[(y(!0),g(Z,null,j(a(V).models,t=>(y(),G(h,{key:t.id,label:t.name,value:t.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"\u4EE3\u7406\u5730\u5740",prop:"proxyUrl"},{default:o(()=>[l(d,{modelValue:a(u).proxyUrl,"onUpdate:modelValue":e[2]||(e[2]=t=>a(u).proxyUrl=t),clearable:"",placeholder:"\u5305\u542B\u534F\u8BAE\uFF0C\u5982https://"},null,8,["modelValue"]),oe]),_:1}),l(n,{label:"\u7C7B\u578B",prop:"isPlus"},{default:o(()=>[l(B,{modelValue:a(u).isPlus,"onUpdate:modelValue":e[3]||(e[3]=t=>a(u).isPlus=t)},{default:o(()=>[l(i,{label:0},{default:o(()=>[p("\u666E\u901A")]),_:1}),l(i,{label:1},{default:o(()=>[p("PLUS")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"\u72B6\u6001",prop:"isDisable"},{default:o(()=>[l(B,{modelValue:a(u).isDisable,"onUpdate:modelValue":e[4]||(e[4]=t=>a(u).isDisable=t)},{default:o(()=>[l(i,{label:0},{default:o(()=>[p("\u542F\u7528")]),_:1}),l(i,{label:1},{default:o(()=>[p("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{pe as _,ne as g,ie as r};
