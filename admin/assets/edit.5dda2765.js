import{e as O,q as T,f as z,s as b,aW as v,an as Z,be as G,bf as L,b9 as M,ba as W,o as m,g as D,h as u,w as t,u as a,N as X,O as Y,k as H,j as n,Z as g,aX as J,aY as K,a3 as Q,b0 as $,aZ as ee,ad as ue,ae as le}from"./.pnpm.adeb4fcc.js";import{s as ae,g as oe}from"./prompt.549c5a4a.js";import{P as te}from"./index.c77a1531.js";import{g as se,f as re,b as de}from"./index.32787260.js";import{u as ne}from"./useDictOptions.f89234d7.js";import{g as pe}from"./type.1474d9d2.js";import"./index.vue_vue_type_style_index_0_scoped_a5e5144a_lang.04acc55d.js";const ie=p=>(ue("data-v-c28cf62b"),p=p(),le(),p),ce={class:"edit-popup"},me=ie(()=>n("div",null,[n("div",{class:"form-tips"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A50*50\u50CF\u7D20\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F")],-1)),_e={class:"flex-1"},fe={class:"flex-1"},Fe={class:"flex-1"},be=O({__name:"edit",emits:["success"],setup(p,{expose:y,emit:B}){const _=T("add"),C=z(()=>_.value=="add"?"\u6DFB\u52A0\u89D2\u8272":"\u7F16\u8F91\u89D2\u8272"),i=b(),c=b(),E="//backend/prompt/upload",l=v({id:0,typeID:1,key:"",value:"",desc:"",icon:"",sort:"100",isDisable:0}),V={key:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",trigger:"blur"}],typeID:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272\u5206\u7C7B",trigger:"blur"}],value:[{required:!0,message:"\u8BF7\u8F93\u5165\u63D0\u793A\u8BCD",trigger:"blur"}],desc:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u7B80\u4ECB",trigger:"blur"}],sort:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F",trigger:"blur"}],isDisable:[{required:!0,message:"\u8BF7\u9009\u62E9\u542F\u7528\u72B6\u6001",trigger:"blur"}]},{optionsData:k,refresh:A}=ne({types:{api:pe}}),h=async()=>{var s,e;await((s=i.value)==null?void 0:s.validate()),await ae(l),(e=c.value)==null||e.close(),B("success"),re.msgSuccess("\u64CD\u4F5C\u6210\u529F")},w=s=>{l.icon=s.data.url},x=async s=>{const e=await oe({id:s.id});for(const r in l)e[r]!=null&&e[r]!=null&&(l[r]=e[r])},I=(s="add")=>{var e;_.value=s,(e=c.value)==null||e.open(),A()},U=()=>{var s;(s=i.value)==null||s.resetFields()},f=v({});return Z(()=>{f.Authorization="Bearer "+se()}),y({open:I,setFormData:x}),(s,e)=>{const r=J,d=K,R=G,q=L,S=Q,P=$,F=M,N=W,j=ee;return m(),D("div",ce,[u(te,{ref_key:"popupRef",ref:c,async:!0,title:a(C),width:"550px",onClose:U,onConfirm:h},{default:t(()=>[u(j,{ref_key:"formRef",ref:i,model:a(l),rules:V,"label-width":"120px"},{default:t(()=>[u(d,{label:"\u89D2\u8272\u540D\u79F0",prop:"key"},{default:t(()=>[u(r,{modelValue:a(l).key,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).key=o),clearable:"",placeholder:""},null,8,["modelValue"])]),_:1}),u(d,{label:"\u89D2\u8272\u5206\u7C7B",prop:"typeID"},{default:t(()=>[u(q,{modelValue:a(l).typeID,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).typeID=o),class:"min-w-[100%]",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B","value-key":"id"},{default:t(()=>[(m(!0),D(X,null,Y(a(k).types,o=>(m(),H(R,{key:o.id,label:o.title,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(P,{action:E,"auto-upload":!0,headers:a(f),limit:1,"on-success":w,"show-file-list":!1,class:"avatar-uploader",name:"icon"},{default:t(()=>[u(d,{label:"\u89D2\u8272\u56FE\u6807\uFF1A",prop:"icon"},{default:t(()=>[u(S,{size:50,src:a(l).icon,onClick:s.submitUpload},null,8,["src","onClick"])]),_:1})]),_:1},8,["headers"]),u(d,null,{default:t(()=>[me]),_:1}),u(d,{label:"\u89D2\u8272\u7B80\u4ECB",prop:"desc"},{default:t(()=>[n("div",_e,[n("div",null,[u(r,{modelValue:a(l).desc,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).desc=o),rows:2,clearable:"",placeholder:"",type:"textarea"},null,8,["modelValue"])])])]),_:1}),u(d,{label:"\u63D0\u793A\u8BCD",prop:"value"},{default:t(()=>[n("div",fe,[n("div",null,[u(r,{modelValue:a(l).value,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).value=o),rows:6,clearable:"",placeholder:"",type:"textarea"},null,8,["modelValue"])])])]),_:1}),u(d,{label:"\u663E\u793A\u987A\u5E8F",prop:"sort"},{default:t(()=>[n("div",Fe,[n("div",null,[u(r,{modelValue:a(l).sort,"onUpdate:modelValue":e[4]||(e[4]=o=>a(l).sort=o),clearable:"",placeholder:"\u6570\u503C\u8D8A\u5927\u8D8A\u9760\u524D"},null,8,["modelValue"])])])]),_:1}),u(d,{label:"\u542F\u7528\u72B6\u6001",prop:"isDisable"},{default:t(()=>[u(N,{modelValue:a(l).isDisable,"onUpdate:modelValue":e[5]||(e[5]=o=>a(l).isDisable=o)},{default:t(()=>[u(F,{label:0},{default:t(()=>[g("\u542F\u7528")]),_:1}),u(F,{label:1},{default:t(()=>[g("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});const Ve=de(be,[["__scopeId","data-v-c28cf62b"]]);export{Ve as default};
