import{e as K,q as L,s as M,aW as q,b2 as I,be as Z,bf as z,b3 as O,bh as W,bu as X,b4 as Y,b5 as G,b6 as H,o,g as J,h as e,w as a,u as n,a$ as Q,Z as l,j as y,C as ee,k as i,y as g,m as p,V as ae,am as w,aX as te,aY as le,ab as ne,aZ as ue,b1 as oe}from"./.pnpm.adeb4fcc.js";import{u as se,_ as ie}from"./usePaging.8d363e02.js";import{f as de,_ as ce}from"./index.32787260.js";import{r as _e,b as me}from"./package.2dbbd2aa.js";import{_ as re}from"./edit.vue_vue_type_script_setup_true_lang.d2e71083.js";import"./index.c77a1531.js";import"./index.vue_vue_type_style_index_0_scoped_a5e5144a_lang.04acc55d.js";const fe=y("br",null,null,-1),pe={class:"flex"},be={class:"mt-4"},he={class:"flex justify-end mt-4"},we=K({__name:"index",setup(ye){const F=L(!1),b=M(),c=q({name:"",type:"",isDisable:-1}),x=async()=>{var d;F.value=!0,await w(),(d=b.value)==null||d.open("add")},B=async d=>{var u,h;F.value=!0,await w(),(u=b.value)==null||u.open("edit"),(h=b.value)==null||h.setFormData(d)},V=async d=>{await de.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await _e({id:d}),m()},{pager:_,getLists:m,resetPage:v,resetParams:P}=se({fetchFun:me,params:c});return I(()=>{m()}),m(),(d,u)=>{const h=te,E=le,k=Z,A=z,r=ne,T=ue,C=oe,$=ce,s=O,f=W,R=X,D=Y,j=G,N=ie,S=H;return o(),J("div",null,[e(C,{class:"!border-none",shadow:"never"},{default:a(()=>[e(T,{ref:"formRef",class:"mb-[-16px]",model:n(c),inline:!0},{default:a(()=>[e(E,{label:"\u5957\u9910\u540D"},{default:a(()=>[e(h,{class:"w-[280px]",modelValue:n(c).name,"onUpdate:modelValue":u[0]||(u[0]=t=>n(c).name=t),placeholder:"",clearable:"",onKeyup:Q(n(v),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(E,{label:"\u72B6\u6001"},{default:a(()=>[e(A,{class:"w-[280px]",modelValue:n(c).isDisable,"onUpdate:modelValue":u[1]||(u[1]=t=>n(c).isDisable=t)},{default:a(()=>[e(k,{label:"\u5168\u90E8",value:-1}),e(k,{label:"\u6B63\u5E38",value:0}),e(k,{label:"\u7981\u7528",value:1})]),_:1},8,["modelValue"])]),_:1}),fe,e(E,null,{default:a(()=>[e(r,{type:"primary",onClick:n(v)},{default:a(()=>[l("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(r,{onClick:n(P)},{default:a(()=>[l("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(C,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[y("div",pe,[e(r,{type:"success",onClick:x},{icon:a(()=>[e($,{name:"el-icon-Plus"})]),default:a(()=>[l(" \u6DFB\u52A0 ")]),_:1})]),y("div",be,[ee((o(),i(j,{size:"large",data:n(_).lists,height:"600",style:{width:"100%"}},{default:a(()=>[e(s,{label:"\u5957\u9910\u540D",prop:"name",sortable:"","min-width":"120"}),e(s,{label:"\u5957\u9910\u4EF7\u683C","min-width":"150"},{default:a(({row:t})=>[l(g(t.price)+"/",1),e(f,{tag:"del"},{default:a(()=>[l(g(t.marketPrice),1)]),_:2},1024)]),_:1}),e(s,{label:"\u5305\u542B\u79EF\u5206",prop:"totalPoints",sortable:"","min-width":"120"}),e(s,{label:"\u6709\u6548\u671F","min-width":"80"},{default:a(({row:t})=>[t.duration==0?(o(),i(f,{key:0,class:"mx-1"},{default:a(()=>[l("\u6C38\u4E45")]),_:1})):p("",!0),t.duration>0?(o(),i(f,{key:1,class:"mx-1"},{default:a(()=>[l(g(t.duration)+"\u5929",1)]),_:2},1024)):p("",!0)]),_:1}),e(s,{label:"\u663E\u793A\u987A\u5E8F",prop:"sort",sortable:"","min-width":"120"}),e(s,{label:"\u8D2D\u4E70\u65B9\u5F0F","min-width":"100"},{default:a(({row:t})=>[t.buyMethod==="online"?(o(),i(f,{key:0},{default:a(()=>[l("\u5728\u7EBF\u8D2D\u4E70")]),_:1})):p("",!0),t.buyMethod==="offline"?(o(),i(f,{key:1},{default:a(()=>[l("\u7EBF\u4E0B\u8D2D\u4E70")]),_:1})):p("",!0),t.buyMethod==="jump"?(o(),i(R,{key:2,type:"info",underline:!1,href:t.jumpUrl},{default:a(()=>[l("\u8DF3\u8F6C\u53D1\u5361\u7AD9")]),_:2},1032,["href"])):p("",!0)]),_:1}),e(s,{label:"\u542F\u7528\u72B6\u6001","min-width":"100"},{default:a(({row:t})=>[t.isDisable===0?(o(),i(D,{key:0,type:"success"},{default:a(()=>[l("\u542F\u7528")]),_:1})):(o(),i(D,{key:1,type:"danger"},{default:a(()=>[l("\u7981\u7528")]),_:1}))]),_:1}),e(s,{label:"\u64CD\u4F5C","min-width":"120",fixed:"right"},{default:a(({row:t})=>[e(r,{type:"primary",link:"",onClick:U=>B(t)},{default:a(()=>[l(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(r,{type:"danger",link:"",onClick:U=>V(t.id)},{default:a(()=>[l(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[S,n(_).loading]]),y("div",he,[e(N,{modelValue:n(_),"onUpdate:modelValue":u[2]||(u[2]=t=>ae(_)?_.value=t:null),onChange:n(m)},null,8,["modelValue","onChange"])])])]),_:1}),e(re,{ref_key:"editRef",ref:b,onSuccess:n(m)},null,8,["onSuccess"])])}}});export{we as default};
