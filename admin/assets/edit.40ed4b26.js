import{_ as N}from"./index.222c373c.js";import{e as F,s as C,q as w,f as h,bi as q,o as B,g as E,h as t,u as l,bj as P,V as I,bk as S,z as T,bl as j,b9 as z,ba as O,bm as Z,j as y,w as u,Z as V,C as G,k as H,N as M,aX as X,aY as Y,aZ as $,b1 as J,ab as K}from"./.pnpm.adeb4fcc.js";import{_ as L}from"./picker.5ee90a76.js";import{d as x,r as A,f as Q}from"./index.32787260.js";import"./index.c77a1531.js";import"./index.vue_vue_type_style_index_0_scoped_a5e5144a_lang.04acc55d.js";import"./usePaging.8d363e02.js";const W=F({__name:"index",props:{modelValue:{default:""},mode:{default:"default"},height:{default:"100%"},width:{default:"auto"},toolbarConfig:{default:()=>({})}},emits:["update:modelValue"],setup(s,{emit:f}){const o=s,c=C(),m=C(),p=w("");let d;const n={MENU_CONF:{uploadImage:{customBrowseAndUpload(e){var a;p.value="image",(a=m.value)==null||a.showPopup(-1),d=e}},uploadVideo:{customBrowseAndUpload(e){var a;p.value="video",(a=m.value)==null||a.showPopup(-1),d=e}}}},_=h(()=>({height:x(o.height),width:x(o.width)})),r=h({get(){return o.modelValue},set(e){f("update:modelValue",e)}}),b=e=>{e.forEach(a=>{d(a)})};q(()=>{const e=c.value;e!=null&&e.destroy()});const g=e=>{c.value=e};return(e,a)=>(B(),E("div",{class:"border border-br flex flex-col",style:T(l(_))},[t(l(P),{class:"border-b border-br",editor:l(c),defaultConfig:s.toolbarConfig,mode:s.mode},null,8,["editor","defaultConfig","mode"]),t(l(S),{class:"overflow-y-auto flex-1",modelValue:l(r),"onUpdate:modelValue":a[0]||(a[0]=v=>I(r)?r.value=v:null),defaultConfig:n,mode:s.mode,onOnCreated:g},null,8,["modelValue","mode"]),t(L,{ref_key:"materialPickerRef",ref:m,type:l(p),limit:-1,"hidden-upload":"",onChange:b},null,8,["type"])],4))}});function ee(){return A.get({url:"/notice/detail"})}function te(s){return A.post({url:"/notice/update",params:s})}const oe={class:"xl:flex"},le=y("span",{class:"font-medium"},"\u516C\u544A\u7BA1\u7406",-1),me=F({__name:"edit",setup(s){const f=C(),o=w({content:"",title:"",expiredAt:"",isDisable:0}),c={title:[{required:!0,message:"\u8BF7\u8F93\u5165\u516C\u544A\u6807\u9898",trigger:"blur"}],content:[{required:!0,message:"\u8BF7\u8F93\u5165\u516C\u544A\u5185\u5BB9",trigger:"blur"}],expiredAt:[{required:!0,message:"\u8BF7\u9009\u62E9\u622A\u6B62\u65E5\u671F",trigger:"blur"}],isDisable:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001",trigger:"blur"}]},m=async()=>{o.value=await ee()},p=async()=>{var d;await((d=f.value)==null?void 0:d.validate()),await te(o.value),Q.msgSuccess("\u64CD\u4F5C\u6210\u529F"),await m()};return m(),(d,n)=>{const _=X,r=Y,b=W,g=j,e=z,a=O,v=$,D=J,k=K,R=N,U=Z("perms");return B(),E(M,null,[y("div",oe,[t(D,{class:"!border-none flex-1 xl:mr-4 mb-4",shadow:"never"},{header:u(()=>[le]),default:u(()=>[t(v,{ref_key:"formRef",ref:f,model:l(o),rules:c,"label-width":"80px"},{default:u(()=>[t(r,{label:"\u516C\u544A\u540D\u79F0",prop:"title"},{default:u(()=>[t(_,{modelValue:l(o).title,"onUpdate:modelValue":n[0]||(n[0]=i=>l(o).title=i)},null,8,["modelValue"])]),_:1}),t(r,{label:"\u516C\u544A\u5185\u5BB9",prop:"content"},{default:u(()=>[t(b,{modelValue:l(o).content,"onUpdate:modelValue":n[1]||(n[1]=i=>l(o).content=i),height:"600"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u622A\u6B62\u65E5\u671F",prop:"expiredAt"},{default:u(()=>[t(g,{modelValue:l(o).expiredAt,"onUpdate:modelValue":n[2]||(n[2]=i=>l(o).expiredAt=i),type:"date",placeholder:"\u9009\u62E9\u65E5\u671F"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u542F\u7528\u72B6\u6001",prop:"isDisable"},{default:u(()=>[t(a,{modelValue:l(o).isDisable,"onUpdate:modelValue":n[3]||(n[3]=i=>l(o).isDisable=i)},{default:u(()=>[t(e,{label:0},{default:u(()=>[V("\u542F\u7528")]),_:1}),t(e,{label:1},{default:u(()=>[V("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),G((B(),H(R,null,{default:u(()=>[t(k,{type:"primary",onClick:p},{default:u(()=>[V("\u4FDD\u5B58")]),_:1})]),_:1})),[[U,["setting:protocol:save"]]])],64)}}});export{me as default};
