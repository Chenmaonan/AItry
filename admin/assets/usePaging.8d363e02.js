import{e as c,f as d,b7 as m,o as f,g as z,h as P,x as h,u as r,b8 as S,aW as y}from"./.pnpm.adeb4fcc.js";const C={class:"pagination"},V=c({__name:"index",props:{modelValue:{default:()=>({})},pageSizes:{default:()=>[15,20,30,40]},layout:{default:"total, sizes, prev, pager, next, jumper"}},emits:["change","update:modelValue"],setup(n,{emit:s}){const u=n,t=d({get(){return u.modelValue},set(g){s("update:modelValue",g)}}),o=()=>{t.value.page=1,s("change")},p=()=>{s("change")};return(g,e)=>{const i=m;return f(),z("div",C,[P(i,h(u,{"pager-count":5,currentPage:r(t).page,"onUpdate:currentPage":e[0]||(e[0]=l=>r(t).page=l),pageSize:r(t).size,"onUpdate:pageSize":e[1]||(e[1]=l=>r(t).size=l),"page-sizes":n.pageSizes,layout:n.layout,total:r(t).count,"hide-on-single-page":!1,onSizeChange:o,onCurrentChange:p}),null,16,["currentPage","pageSize","page-sizes","layout","total"])])}}});function b(n){const{page:s=1,size:u=15,fetchFun:t,params:o={},firstLoading:p=!1}=n,g=Object.assign({},S(o)),e=y({page:s,size:u,loading:p,count:0,lists:[]}),i=()=>(e.loading=!0,t({pageNo:e.page,pageSize:e.size,...o}).then(a=>(e.count=a==null?void 0:a.count,e.lists=a==null?void 0:a.lists,Promise.resolve(a))).catch(a=>Promise.reject(a)).finally(()=>{e.loading=!1}));return{pager:e,getLists:i,resetParams:()=>{Object.keys(g).forEach(a=>{o[a]=g[a]}),i()},resetPage:()=>{e.page=1,i()}}}export{V as _,b as u};
