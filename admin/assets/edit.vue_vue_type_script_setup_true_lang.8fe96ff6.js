import{e as L,s as C,aW as q,f as Y,b9 as w,ba as x,o as m,g as D,h as t,w as o,u as l,j as p,Z as E,y as b,k as y,m as f,aY as P,aX as T,aZ as h}from"./.pnpm.adeb4fcc.js";import{r as B}from"./index.32787260.js";import{P as Q}from"./index.c77a1531.js";function ee(){return B.get({url:"/setting/storage/list"})}function G(s){return B.get({url:"/setting/storage/detail",params:s})}function Z(s){return B.post({url:"/setting/storage/update",params:s})}var i=(s=>(s.LOCAL="local",s.QINIU="qiniu",s.ALIYUN="oss",s.QCLOUD="cos",s))(i||{});const j={class:"edit-popup"},W={class:"form-tips"},X={key:0},z={class:"flex-1"},H={class:"flex-1"},ue=L({__name:"edit",emits:["success"],setup(s,{expose:S,emit:V}){const F=C(),c=C(),e=q({engine:"",bucket:"",accessKey:"",secretKey:"",domain:"",region:"",isDefault:!1}),K=[{name:"\u672C\u5730\u5B58\u50A8",type:i.LOCAL,tips:"\u9700\u8981\u5C06.env\u6587\u4EF6\u91CCAPP_URL\u914D\u7F6E\u6210\u5B9E\u9645\u57DF\u540D\u5730\u5740\u6216\u8005ip:3000"},{name:"\u4E03\u725B\u4E91\u5B58\u50A8",type:i.QINIU,tips:"\u5207\u6362\u4E03\u725B\u4E91\u5B58\u50A8\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u4E03\u725B\u4E91"},{name:"\u963F\u91CC\u4E91OSS",type:i.ALIYUN,tips:"\u5207\u6362\u963F\u91CC\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u963F\u91CC\u4E91OSS"},{name:"\u817E\u8BAF\u4E91OSS",type:i.QCLOUD,tips:"\u5207\u6362\u817E\u8BAF\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u817E\u8BAF\u4E91OSS"}],k={engine:[{required:!0,message:"\u8BF7\u9009\u62E9\u5B58\u50A8\u65B9\u5F0F",trigger:"blur"}],bucket:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",trigger:"blur"}],accessKey:[{required:!0,message:"\u8BF7\u8F93\u5165ACCESS_KEY",trigger:"blur"}],secretKey:[{required:!0,message:"\u8BF7\u8F93\u5165SECRET_KEY",trigger:"blur"}],endpoint:[{required:!0,message:"\u8BF7\u8F93\u5165ENDPOINT",trigger:"blur"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D",trigger:"blur"}],region:[{required:!0,message:"\u8BF7\u8F93\u5165REGION",trigger:"blur"}],isDefault:[{required:!0,message:"\u8BF7\u8F93\u5165\u9009\u62E9\u662F\u5426\u8BBE\u4E3A\u9ED8\u8BA4",trigger:"blur"}]},_=Y(()=>K.find(r=>r.type==e.engine)),N=async()=>{var r,u;await((r=F.value)==null?void 0:r.validate()),await Z(e),(u=c.value)==null||u.close(),V("success")},v=async()=>{const r=await G({engine:e.engine});for(const u in r)e[u]=r[u]},O=r=>{var u;e.engine=r,(u=c.value)==null||u.open(),v()},U=()=>{var r;(r=F.value)==null||r.resetFields()};return S({open:O}),(r,u)=>{const g=w,n=P,d=T,I=x,R=h;return m(),D("div",j,[t(Q,{ref_key:"popupRef",ref:c,title:"\u8BBE\u7F6E\u5B58\u50A8",async:!0,width:"550px",onConfirm:N,onClose:U},{default:o(()=>[t(R,{ref_key:"formRef",ref:F,model:l(e),"label-width":"120px",rules:k},{default:o(()=>[t(n,{label:"\u5B58\u50A8\u65B9\u5F0F",prop:"engine"},{default:o(()=>{var a;return[p("div",null,[t(g,{"model-value":""},{default:o(()=>{var A;return[E(b((A=l(_))==null?void 0:A.name),1)]}),_:1}),p("div",W,b((a=l(_))==null?void 0:a.tips),1)])]}),_:1}),l(e).engine!=="local"?(m(),D("div",X,[t(n,{label:"Bucket",prop:"bucket"},{default:o(()=>[p("div",z,[t(d,{modelValue:l(e).bucket,"onUpdate:modelValue":u[0]||(u[0]=a=>l(e).bucket=a),placeholder:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0(Bucket)",clearable:""},null,8,["modelValue"])])]),_:1}),t(n,{label:"ACCESS_KEY",prop:"accessKey"},{default:o(()=>[t(d,{modelValue:l(e).accessKey,"onUpdate:modelValue":u[1]||(u[1]=a=>l(e).accessKey=a),placeholder:"\u8BF7\u8F93\u5165ACCESS_KEY(AK)",clearable:""},null,8,["modelValue"])]),_:1}),t(n,{label:"SECRET_KEY",prop:"secretKey"},{default:o(()=>[t(d,{modelValue:l(e).secretKey,"onUpdate:modelValue":u[2]||(u[2]=a=>l(e).secretKey=a),placeholder:"\u8BF7\u8F93\u5165SECRET_KEY(SK)",clearable:""},null,8,["modelValue"])]),_:1}),l(e).engine==l(i).ALIYUN?(m(),y(n,{key:0,label:"ENDPOINT",prop:"endpoint"},{default:o(()=>[t(d,{modelValue:l(e).endpoint,"onUpdate:modelValue":u[3]||(u[3]=a=>l(e).endpoint=a),placeholder:"\u8BF7\u8F93\u5165ENDPOINT",clearable:""},null,8,["modelValue"])]),_:1})):f("",!0),t(n,{label:"\u7A7A\u95F4\u57DF\u540D",prop:"domain"},{default:o(()=>[p("div",H,[p("div",null,[t(d,{modelValue:l(e).domain,"onUpdate:modelValue":u[4]||(u[4]=a=>l(e).domain=a),placeholder:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D(Domain)",clearable:""},null,8,["modelValue"])])])]),_:1}),l(e).engine==l(i).QCLOUD?(m(),y(n,{key:1,label:"REGION",prop:"region"},{default:o(()=>[t(d,{modelValue:l(e).region,"onUpdate:modelValue":u[5]||(u[5]=a=>l(e).region=a),placeholder:"\u8BF7\u8F93\u5165region",clearable:""},null,8,["modelValue"])]),_:1})):f("",!0)])):f("",!0),t(n,{label:"\u8BBE\u4E3A\u9ED8\u8BA4",prop:"isDefault"},{default:o(()=>[t(I,{modelValue:l(e).isDefault,"onUpdate:modelValue":u[6]||(u[6]=a=>l(e).isDefault=a)},{default:o(()=>[t(g,{label:!1},{default:o(()=>[E("\u5426")]),_:1}),t(g,{label:!0},{default:o(()=>[E("\u662F")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{ue as _,ee as g};
