import{e as q,q as z,s as y,aW as I,b2 as M,be as Z,bf as H,b3 as O,b4 as W,b5 as X,b6 as Y,o as f,g as G,h as e,w as a,u as l,Z as u,j as _,C as J,k as C,V as K,a0 as Q,am as w,aX as ee,aY as ae,ab as te,aZ as le,b1 as oe,a3 as se}from"./.pnpm.adeb4fcc.js";import{u as ne,_ as ue}from"./usePaging.8d363e02.js";import{f as D,_ as ie}from"./index.32787260.js";import{r as ce,a as re}from"./prompt.549c5a4a.js";import de from"./edit.5dda2765.js";import{_ as _e}from"./import.vue_vue_type_script_setup_true_lang.7aac89ff.js";import"./index.c77a1531.js";import"./index.vue_vue_type_style_index_0_scoped_a5e5144a_lang.04acc55d.js";import"./useDictOptions.f89234d7.js";import"./type.1474d9d2.js";const me={class:"storage"},pe=_("br",null,null,-1),fe={class:"flex"},be={class:"mt-4"},he={href:"javascript:void(0);"},ve={class:"flex justify-end mt-4"},Ae=q({__name:"index",setup(Ce){const g=z(!1),m=y(),B=y(),i=I({key:"",isDisable:-1}),F=o=>{Q.alert(o,"\u63D0\u793A\u8BCD",{center:!0,draggable:!0,dangerouslyUseHTMLString:!0})},{pager:r,getLists:c,resetPage:V,resetParams:x}=ne({fetchFun:re,params:i});M(()=>{c()});const A=async()=>{var o;g.value=!0,await w(),(o=m.value)==null||o.open("add")},P=async o=>{var s,p;g.value=!0,await w(),(s=m.value)==null||s.open("edit"),(p=m.value)==null||p.setFormData(o)},R=async o=>{await D.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await ce({id:o}),D.msgSuccess("\u5220\u9664\u6210\u529F"),c()};return c(),(o,s)=>{const p=ee,b=ae,h=Z,S=H,d=te,T=le,k=oe,$=ie,n=O,U=se,v=W,j=X,L=ue,N=Y;return f(),G("div",me,[e(k,{class:"!border-none",shadow:"never"},{default:a(()=>[e(T,{ref:"formRef",class:"mb-[-16px]",model:l(i),inline:!0},{default:a(()=>[e(b,{label:"\u6807\u9898"},{default:a(()=>[e(p,{modelValue:l(i).key,"onUpdate:modelValue":s[0]||(s[0]=t=>l(i).key=t),class:"w-[280px]",placeholder:"\u652F\u6301\u6A21\u7CCA\u67E5\u8BE2",clearable:""},null,8,["modelValue"])]),_:1}),e(b,{label:"\u72B6\u6001"},{default:a(()=>[e(S,{class:"w-[280px]",modelValue:l(i).isDisable,"onUpdate:modelValue":s[1]||(s[1]=t=>l(i).isDisable=t)},{default:a(()=>[e(h,{label:"\u5168\u90E8",value:-1}),e(h,{label:"\u542F\u7528",value:0}),e(h,{label:"\u7981\u7528",value:1})]),_:1},8,["modelValue"])]),_:1}),pe,e(b,null,{default:a(()=>[e(d,{type:"primary",onClick:l(V)},{default:a(()=>[u("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(d,{onClick:l(x)},{default:a(()=>[u("\u91CD\u7F6E")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(k,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[_("div",fe,[e(d,{type:"success",onClick:A},{icon:a(()=>[e($,{name:"el-icon-Plus"})]),default:a(()=>[u(" \u6DFB\u52A0 ")]),_:1})]),_("div",be,[J((f(),C(j,{size:"large",data:l(r).lists,height:"600",style:{width:"100%"}},{default:a(()=>[e(n,{label:"\u89D2\u8272\u540D",sortable:"",prop:"key","min-width":"100"}),e(n,{label:"\u89D2\u8272\u56FE\u6807","min-width":"80"},{default:a(({row:t})=>[e(U,{src:t.icon,size:40},null,8,["src"])]),_:1}),e(n,{label:"\u89D2\u8272\u5206\u7C7B",prop:"type.title","min-width":"80"}),e(n,{label:"\u89D2\u8272\u7B80\u4ECB",prop:"desc","min-width":"120"}),e(n,{label:"\u63D0\u793A\u8BCD","min-width":"100"},{default:a(({row:t})=>[_("a",he,[e(v,{type:"success",onClick:E=>F(t.value)},{default:a(()=>[u("\u67E5\u770B\u63D0\u793A\u8BCD")]),_:2},1032,["onClick"])])]),_:1}),e(n,{label:"\u987A\u5E8F",prop:"sort",sortable:"","min-width":"100"}),e(n,{label:"\u72B6\u6001","min-width":"60"},{default:a(({row:t})=>[t.isDisable===0?(f(),C(v,{key:0,type:"success"},{default:a(()=>[u("\u542F\u7528")]),_:1})):(f(),C(v,{key:1,type:"danger"},{default:a(()=>[u("\u7981\u7528")]),_:1}))]),_:1}),e(n,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:a(({row:t})=>[e(d,{type:"primary",link:"",onClick:E=>P(t)},{default:a(()=>[u(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(d,{type:"danger",link:"",onClick:E=>R(t.id)},{default:a(()=>[u(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,l(r).loading]]),_("div",ve,[e(L,{modelValue:l(r),"onUpdate:modelValue":s[2]||(s[2]=t=>K(r)?r.value=t:null),onChange:l(c)},null,8,["modelValue","onChange"])])])]),_:1}),e(de,{ref_key:"editRef",ref:m,onSuccess:l(c)},null,8,["onSuccess"]),e(_e,{ref_key:"importRef",ref:B,onSuccess:l(c)},null,8,["onSuccess"])])}}});export{Ae as default};
