import{e as x,q as I,s as m,aW as S,be as R,bf as N,o as p,g as i,h as t,w as r,u as l,N as q,O as z,k as O,j as f,aY as P,aa as U,aX as A,aZ as j}from"./.pnpm.adeb4fcc.js";import{g as L,a as W}from"./package.2dbbd2aa.js";import{c as X}from"./card.f7b86a7f.js";import{P as Y}from"./index.c77a1531.js";import{f as Z}from"./index.32787260.js";import{u as G}from"./useDictOptions.f89234d7.js";const H={class:"edit-popup"},J={class:"flex-1"},ue=x({__name:"add",emits:["success"],setup(K,{expose:_,emit:F}){const b=I("add"),n=m(),c=m(),a=S({packageID:"",batchSize:100,desc:""}),g={packageID:[{required:!0,message:"\u8BF7\u9009\u62E9\u5957\u9910",trigger:"blur"}],batchNumber:[{required:!0,message:"\u8BF7\u8F93\u5165\u751F\u6210\u6570\u91CF",trigger:"blur"}],batchDesc:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u9014\u63CF\u8FF0",trigger:"blur"}]},{optionsData:k,refresh:v}=G({packages:{api:L}}),C=async u=>{const e=await W({id:u.id});for(const s in a)e[s]!=null&&e[s]!=null&&(a[s]=e[s])},D=async()=>{var u,e;await((u=n.value)==null?void 0:u.validate()),await X(a),(e=c.value)==null||e.close(),F("success"),Z.msgSuccess("\u64CD\u4F5C\u6210\u529F")},h=(u="add")=>{var e;b.value=u,(e=c.value)==null||e.open(),v()},E=()=>{var u;(u=n.value)==null||u.resetFields()};return _({open:h,setFormData:C}),(u,e)=>{const s=R,V=N,d=P,w=U,B=A,y=j;return p(),i("div",H,[t(Y,{ref_key:"popupRef",ref:c,async:!0,title:"\u6279\u91CF\u751F\u6210\u5361\u5238",width:"550px",onClose:E,onConfirm:D},{default:r(()=>[t(y,{ref_key:"formRef",ref:n,model:l(a),rules:g,"label-width":"100px"},{default:r(()=>[t(d,{label:"\u9009\u62E9\u5957\u9910",prop:"packageID"},{default:r(()=>[t(V,{modelValue:l(a).packageID,"onUpdate:modelValue":e[0]||(e[0]=o=>l(a).packageID=o),class:"min-w-[100%]",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5957\u9910","value-key":"id"},{default:r(()=>[(p(!0),i(q,null,z(l(k).packages,o=>(p(),O(s,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"\u751F\u6210\u6570\u91CF",prop:"batchSize"},{default:r(()=>[t(w,{modelValue:l(a).batchSize,"onUpdate:modelValue":e[1]||(e[1]=o=>l(a).batchSize=o),max:100,min:1},null,8,["modelValue"])]),_:1}),t(d,{label:"\u7528\u9014\u63CF\u8FF0",prop:"desc"},{default:r(()=>[f("div",J,[f("div",null,[t(B,{modelValue:l(a).desc,"onUpdate:modelValue":e[2]||(e[2]=o=>l(a).desc=o),rows:4,clearable:"",placeholder:"\u5982\u7B2C\u4E09\u65B9\u53D1\u5361\u7F51\u7AD9\u540D",type:"textarea"},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{ue as _};
